{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient as createSupabaseServerClient } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\n\nexport async function createClient() {\n  const cookieStore = await cookies();\n\n  return createSupabaseServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options),\n            );\n          } catch {\n            // The \"setAll\" method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  );\n}\n\nexport async function createServerClient() {\n  const cookieStore = await cookies();\n\n  return createSupabaseServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return cookieStore.getAll();\n        },\n        setAll(cookiesToSet) {\n          try {\n            cookiesToSet.forEach(({ name, value, options }) =>\n              cookieStore.set(name, value, options),\n            );\n          } catch {\n            // The \"setAll\" method was called from a Server Component.\n            // This can be ignored if you have middleware refreshing\n            // user sessions.\n          }\n        },\n      },\n    },\n  );\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,2SAAO;IAEjC,OAAO,IAAA,4SAA0B,sUAG/B;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,2SAAO;IAEjC,OAAO,IAAA,4SAA0B,sUAG/B;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/components/students-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/students-client.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/students-client.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,yaAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0]}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/components/students-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/students-client.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/students-client.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,yaAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","ignoreList":[0]}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/components/role-based-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RoleBasedNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call RoleBasedNav() from the server but RoleBasedNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/role-based-nav.tsx <module evaluation>\",\n    \"RoleBasedNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,yaAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,+DACA","ignoreList":[0]}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/components/role-based-nav.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RoleBasedNav = registerClientReference(\n    function() { throw new Error(\"Attempted to call RoleBasedNav() from the server but RoleBasedNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/role-based-nav.tsx\",\n    \"RoleBasedNav\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,yaAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,2CACA","ignoreList":[0]}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/yerkomunoz/Dev-personal/V0/v0-gym-attendance-app/app/students/page.tsx"],"sourcesContent":["import { createClient } from \"@/lib/supabase/server\";\nimport StudentsClient from \"@/components/students-client\";\nimport { RoleBasedNav } from \"@/components/role-based-nav\";\nimport { redirect } from \"next/navigation\";\n\nexport default async function StudentsPage() {\n  const supabase = await createClient();\n\n  // Get current user - use getUser() for server-side authentication\n  const { data: { user }, error: authError } = await supabase.auth.getUser();\n\n  if (authError || !user) {\n    redirect('/login');\n  }\n\n  // Get user profile with role\n  const { data: userProfile } = await supabase\n    .from('users')\n    .select('role, branch_id')\n    .eq('id', user.id)\n    .single();\n\n  if (!userProfile) {\n    redirect('/login');\n  }\n\n  // Build query based on role\n  let query = supabase\n    .from(\"students\")\n    .select(`\n      *,\n      branches(name),\n      plans(name, price),\n      trainers(id, name)\n    `);\n\n  // Filter based on role\n  if (userProfile.role === 'trainer' && userProfile.branch_id) {\n    // Trainers can only see students from their branch\n    query = query.eq('branch_id', userProfile.branch_id);\n  }\n  // Admin sees all students (no filter)\n  // Students shouldn't access this page (middleware will handle)\n\n  const { data: students, error } = await query.order(\"name\");\n\n  if (error) {\n    console.error(\"Error fetching students:\", error);\n  }\n\n  // Fetch plans for the dropdown\n  const { data: plans } = await supabase\n    .from(\"plans\")\n    .select(\"*\")\n    .eq(\"active\", true)\n    .order(\"name\");\n\n  // Fetch trainers for the dropdown\n  let trainersQuery = supabase\n    .from(\"trainers\")\n    .select(\"id, name, branch_id\")\n    .eq(\"active\", true);\n\n  // Filter trainers by branch for non-admin users\n  if (userProfile.role === 'trainer' && userProfile.branch_id) {\n    trainersQuery = trainersQuery.eq('branch_id', userProfile.branch_id);\n  }\n\n  const { data: trainers } = await trainersQuery.order(\"name\");\n\n  return (\n    <>\n      <RoleBasedNav />\n      <StudentsClient\n        initialStudents={students || []}\n        availablePlans={plans || []}\n        availableTrainers={trainers || []}\n      />\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;;;;;;AAEe,eAAe;IAC5B,MAAM,WAAW,MAAM,IAAA,yIAAY;IAEnC,kEAAkE;IAClE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAExE,IAAI,aAAa,CAAC,MAAM;QACtB,IAAA,kWAAQ,EAAC;IACX;IAEA,6BAA6B;IAC7B,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,SACL,MAAM,CAAC,mBACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;IAET,IAAI,CAAC,aAAa;QAChB,IAAA,kWAAQ,EAAC;IACX;IAEA,4BAA4B;IAC5B,IAAI,QAAQ,SACT,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;IAKT,CAAC;IAEH,uBAAuB;IACvB,IAAI,YAAY,IAAI,KAAK,aAAa,YAAY,SAAS,EAAE;QAC3D,mDAAmD;QACnD,QAAQ,MAAM,EAAE,CAAC,aAAa,YAAY,SAAS;IACrD;IACA,sCAAsC;IACtC,+DAA+D;IAE/D,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC;IAEpD,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,4BAA4B;IAC5C;IAEA,+BAA+B;IAC/B,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAU,MACb,KAAK,CAAC;IAET,kCAAkC;IAClC,IAAI,gBAAgB,SACjB,IAAI,CAAC,YACL,MAAM,CAAC,uBACP,EAAE,CAAC,UAAU;IAEhB,gDAAgD;IAChD,IAAI,YAAY,IAAI,KAAK,aAAa,YAAY,SAAS,EAAE;QAC3D,gBAAgB,cAAc,EAAE,CAAC,aAAa,YAAY,SAAS;IACrE;IAEA,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,cAAc,KAAK,CAAC;IAErD,qBACE;;0BACE,+YAAC,mJAAY;;;;;0BACb,+YAAC,4IAAc;gBACb,iBAAiB,YAAY,EAAE;gBAC/B,gBAAgB,SAAS,EAAE;gBAC3B,mBAAmB,YAAY,EAAE;;;;;;;;AAIzC"}}]
}